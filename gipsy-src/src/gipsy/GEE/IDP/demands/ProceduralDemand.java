package gipsy.GEE.IDP.demands;


import gipsy.lang.GIPSYIdentifier;
import gipsy.lang.GIPSYType;

import java.io.Serializable;


/**
 * A demand for the evaluation of a certain procedure.
 * 
 * Procedural demands are generated by the Intensional Demand Processor
 * as it encounters a procedural function call nodes while traversing the AST.
 * A demand worker tier will request procedural demands from the DST,
 * after processed the result then migrated back to the DST.
 * 
 * @author Bin Han
 * @author Serguei Mokhov
 * @version $Id: ProceduralDemand.java,v 1.16 2012/06/16 03:10:37 mokhov Exp $
 * @since
 */
public class ProceduralDemand
extends Demand
{
	//	GEERid -- signature -- in the parent

//	[code] -- method in the parent class
	
	/**
	 * For serialization versioning.
	 */
	private static final long serialVersionUID = -741418534887648683L;

	/**
	 * programID.
	 */
	protected GIPSYIdentifier oProgramID = null;
	
	/**
	 * Object params[].
	 */
	//protected Serializable[] oParameters = null;
	protected GIPSYType[] aoParameters = null;

	/**
	 * XXX.
	 */
	public ProceduralDemand()
	{
		super();
		this.oType = DemandType.PROCEDURAL;
	}

	/**
	 * @param poSignature
	 */
	public ProceduralDemand(DemandSignature poSignature)
	{
		super(poSignature);
	}

	/**
	 * XXX.
	 * @param poResult XXX
	 */
	public ProceduralDemand(Serializable poResult)
	{
		super(poResult);
		this.oType = DemandType.PROCEDURAL;
	}

	/**
	 * XXX.
	 * @param pstrName XXX
	 */
	public ProceduralDemand(String pstrName)
	{
		super(pstrName);
		this.oType = DemandType.PROCEDURAL;
	}

	@Override
	public IDemand execute()
	{
		// XXX: review
		storeResult(work());
		return this;
	}

	@Override
	public double getSize()
	{
		// TODO Auto-generated method stub
		return 0;
	}

	public GIPSYIdentifier getProgramID()
	{
		return this.oProgramID;
	}

	public void setProgramID(GIPSYIdentifier poProgramID)
	{
		this.oProgramID = poProgramID;
	}

	public GIPSYType[] getParameters()
	{
		return this.aoParameters;
	}

	public void setParameters(GIPSYType[] paoParameters)
	{
		this.aoParameters = paoParameters;
	}
	
	@Override
	public synchronized String toString()
	{
		String strDemandData
			= ""
			+ "oProgramID: " + oProgramID + ","
			+ "aoParameters: " + aoParameters + ","
			;
		
		return strDemandData + "\n" + super.toString();
	}
}

// EOF
